# Azure Event Hubs Configuration with HTTP Proxy
#
# Route traffic through an HTTP proxy server

<match **>
  @type azureeventhubs

  connection_string "#{ENV['AZURE_EVENTHUBS_CONNECTION_STRING']}"
  hub_name proxied-logs

  # HTTP Proxy Configuration
  proxy_addr proxy.example.com
  proxy_port 8080

  # Connection settings
  open_timeout 120
  read_timeout 120

  # SAS token expiry
  expiry_interval 3600

  include_tag true
  include_time true

  <buffer>
    @type memory
    flush_interval 10s
    retry_max_times 3
  </buffer>
</match>
