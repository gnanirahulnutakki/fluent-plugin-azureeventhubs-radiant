# Azure Event Hubs Configuration with Metadata
#
# Includes Fluentd metadata (tag and timestamp) in the events

<match application.**>
  @type azureeventhubs

  connection_string "#{ENV['AZURE_EVENTHUBS_CONNECTION_STRING']}"
  hub_name application-logs

  # Include Fluentd tag in the event
  include_tag true

  # Include timestamp in the event
  include_time true

  # Custom field name for timestamp (default: "time")
  tag_time_name timestamp

  # Print records to stdout for debugging (default: false)
  print_records false

  <buffer tag>
    @type file
    path /var/log/fluentd/azureeventhubs
    flush_interval 10s
    flush_mode interval
    retry_max_times 5
    retry_wait 5s
  </buffer>
</match>
